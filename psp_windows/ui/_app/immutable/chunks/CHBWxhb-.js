import{s,a as t,i as e,d as a}from"./B9aKyTE9.js";import{d as n,M as o,n as d}from"./FTlQNedl.js";import"./B7z-6CDi.js";import"./woX702LQ.js";import"./DPqr1Em3.js";class g{loading=!1;#i=s(t({}));get keyMap(){return e(this.#i)}set keyMap(i){a(this.#i,i,!0)}#s=s(t({}));get buildings(){return e(this.#s)}set buildings(i){a(this.#s,i,!0)}async ensureLoaded(){if(Object.keys(this.buildings).length===0&&!this.loading)try{this.loading=!0,this.buildings=await n(o.GET_BUILDINGS),this.keyMap=d(Object.keys(this.buildings)),this.loading=!1}catch(i){throw this.loading=!1,console.error("Error fetching buildings:",i),i}this.loading&&(await new Promise(i=>setTimeout(i,100)),await this.ensureLoaded())}getByKey(i){try{return this.buildings[this.keyMap[i.toLowerCase()]]}catch(r){console.error("Error getting building data:",r)}}async reset(){this.buildings={},await this.ensureLoaded()}}const p=new g;export{p as b};
