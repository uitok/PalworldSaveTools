import{l as ue,b as _e,p,i as $,r as me}from"../chunks/woX702LQ.js";import{e as K,g as Q,h as n,p as X,f as d,c as t,i as m,u as V,b as i,r as s,t as O,j as Y,B as q,n as W,k as B,l as ge,d as xe,s as be}from"../chunks/B9aKyTE9.js";import{I as he,b as ye,o as we,g as ze,k as Ie,q as J,D as Ce,e as ee,M as ae,r as te}from"../chunks/FTlQNedl.js";import{r as Fe,a as Ae,b as H}from"../chunks/DPqr1Em3.js";import{b as $e}from"../chunks/aaggoT9b.js";import{g as se}from"../chunks/B7z-6CDi.js";function ke(k,e){const c=ue(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["circle",{cx:"15",cy:"19",r:"2"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1"}],["path",{d:"M15 11v-1"}],["path",{d:"M15 17v-2"}]];he(k,_e({name:"folder-archive"},()=>c,{get iconNode(){return v},children:(D,y)=>{var x=K(),M=Q(x);ye(M,e,"default",{},null),n(D,x)},$$slots:{default:!0}}))}var De=d('<div class="dropzone-lead mb-4"><!></div>'),Me=d("<strong>Upload a file</strong> or drag and drop",1),Pe=d('<div class="mt-4 flex flex-row items-center justify-center space-x-2"><strong> </strong> <span> </span></div>'),Se=d('<small class="dropzone-meta opacity-75"><!></small>'),je=d('<div data-testid="file-dropzone"><input/> <div><div><!> <div class="dropzone-message"><!> <div class="mt-2 flex items-center justify-center"><!></div> <!></div> <!></div></div></div>');function Be(k,e){X(e,!0);let c=p(e,"files",15),v=p(e,"border",3,"border-2 border-dashed"),D=p(e,"padding",3,"p-4 py-8"),y=p(e,"rounded",3,"rounded-container-token"),x=p(e,"regionInterface",3,""),M=p(e,"regionInterfaceText",3,""),U=p(e,"baseClass",3,""),L=p(e,"inputClass",3,""),T=p(e,"interfaceClass",3,""),E=p(e,"accept",3,".zip"),N=me(e,["$$slots","$$events","$$legacy","files","name","border","padding","rounded","regionInterface","regionInterfaceText","baseClass","inputClass","interfaceClass","lead","message","meta","accept","onUpload"]),o;const l="textarea relative flex justify-center items-center",g="w-full absolute top-0 left-0 right-0 bottom-0 z-1 opacity-0 disabled:opacity-0! cursor-pointer",w="flex justify-center items-center text-center";let z=V(()=>`${l} ${v()} ${D()} ${y()} ${U()}`),u=V(()=>`${g} ${L()}`),f=V(()=>`${w} ${T()}`);function I(){const{class:a,...r}=N;return r}var C=je();let P;var b=t(C);Fe(b),Ae(b,a=>({type:"file",name:e.name,class:`dropzone-input ${m(u)??""}`,...a,accept:E(),multiple:!1}),[I]),$e(b,a=>o=a,()=>o);var F=i(b,2),h=t(F),S=t(h);{var A=a=>{var r=De(),_=t(r);q(_,()=>e.lead),s(r),n(a,r)};$(S,a=>{e.lead&&a(A)})}var j=i(S,2),Z=t(j);{var re=a=>{var r=K(),_=Q(r);q(_,()=>e.message),n(a,r)},oe=a=>{var r=Me();W(),n(a,r)};$(Z,a=>{e.message?a(re):a(oe,!1)})}var R=i(Z,2),ne=t(R);ke(ne,{class:"h-24 w-24"}),s(R);var le=i(R,2);{var ie=a=>{var r=Pe(),_=t(r),ve=t(_,!0);s(_);var G=i(_,2),fe=t(G);s(G),s(r),O(pe=>{B(ve,c()[0].name),B(fe,`(${pe??""} MB)`)},[()=>(c()[0].size/1024/1024).toFixed(2)]),n(a,r)};$(le,a=>{c()&&a(ie)})}s(j);var de=i(j,2);{var ce=a=>{var r=Se(),_=t(r);q(_,()=>e.meta),s(r),n(a,r)};$(de,a=>{e.meta&&a(ce)})}s(h),s(F),s(C),O(a=>{P=H(C,1,`dropzone ${m(z)??""}`,null,P,a),H(F,1,`dropzone-interface ${m(f)??""} ${x()??""}`),H(h,1,`dropzone-interface-text ${M()??""}`)},[()=>({"opacity-50":e.disabled})]),we(b,c),n(k,C),Y()}async function Ue(){ee(ae.DOWNLOAD_SAVE_FILE),await se("/loading"),te("Starting to cook üßë‚Äçüç≥...")}var Le=d("<span>Download modified Level.sav file</span>"),Te=d('<button class="btn preset-filled-primary-500 font-bold"><!> Download</button>'),Oe=d('<div class="flex"><div class="flex grow flex-col"><h4 class="h4">Current Save File</h4> <p class="text"><strong>File:</strong> </p> <p class="text"><strong>Size:</strong> </p></div> <div class="flex flex-col space-y-2"><!></div></div>'),Ee=d('<h3 class="h3">Click to upload your zipped save files</h3> <span>or drag and drop your zip file here</span>',1),Ne=d('<button class="btn preset-filled-primary-500 font-bold">Upload</button>'),Re=d("<span> </span>"),Ve=d('<div class="mt-2 flex flex-col"><!></div>'),qe=d('<div class="flex h-full w-full flex-col items-center justify-center space-y-4"><!> <div class="flex w-1/3 flex-row justify-center"><div class="flex w-full flex-col items-center"><!> <!></div></div></div>');function Qe(k,e){X(e,!0);let c=ze(),v=be(void 0);async function D(){if(!m(v))return;await se("/loading"),c.resetState(),te("Uploading zip file üöÄ...");const o=new FileReader;o.onload=function(){const l=o.result,g=new Uint8Array(l);ee(ae.LOAD_ZIP_FILE,Array.from(g))},o.readAsArrayBuffer(m(v)[0])}var y=qe(),x=t(y);{var M=o=>{Ie(o,{class:"w-1/3",children:(l,g)=>{var w=Oe(),z=t(w),u=i(t(z),2),f=i(t(u));s(u);var I=i(u,2),C=i(t(I));s(I),s(z);var P=i(z,2),b=t(P);J(b,{popup:h=>{var S=Le();n(h,S)},children:(h,S)=>{var A=Te();A.__click=[Ue];var j=t(A);Ce(j,{}),W(),s(A),n(h,A)},$$slots:{popup:!0,default:!0}}),s(P),s(w),O(F=>{B(f,` ${c.saveFile.name??""}`),B(C,` ${F??""} MB`)},[()=>(c.saveFile.size/1024/1024).toFixed(2)]),n(l,w)},$$slots:{default:!0}})};$(x,o=>{c.saveFile&&o(M)})}var U=i(x,2),L=t(U),T=t(L);Be(T,{baseClass:"w-full hover:bg-surface-800",name:"file",get files(){return m(v)},set files(l){xe(v,l,!0)},message:l=>{var g=Ee();W(2),n(l,g)},$$slots:{message:!0}});var E=i(T,2);{var N=o=>{var l=Ve(),g=t(l);J(g,{children:u=>{var f=Ne();f.__click=D,n(u,f)},popup:u=>{var f=Re(),I=t(f);s(f),O(()=>B(I,`Upload ${(m(v)?m(v)[0].name:"")??""}`)),n(u,f)},$$slots:{default:!0,popup:!0}}),s(l),n(o,l)};$(E,o=>{m(v)&&o(N)})}s(L),s(U),s(y),n(k,y),Y()}ge(["click"]);export{Qe as component};
